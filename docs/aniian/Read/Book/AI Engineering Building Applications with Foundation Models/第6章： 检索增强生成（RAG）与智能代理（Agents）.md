#### 1. 内容概述

本章探讨构建 AI 应用的两种主要模式：**检索增强生成 (RAG)** 和 **智能代理 (Agents)**。这两种技术是连接基础模型能力与应用需求的关键桥梁，使基础模型得以应用于实际场景。

*   **RAG** 通过检索外部知识增强生成模型的性能，减少模型幻觉，适用于知识密集型任务。
*   **智能代理** 通过与环境互动，执行更复杂的任务，适用于需要自主决策和行动的场景。

#### 2. 章节结构

**2.1 RAG (检索增强生成)**
*   **RAG 架构：** 介绍 RAG 的基本流程，包括检索、增强和生成三个步骤。
*   **检索算法：** 详细讲解各种检索算法，例如词频-逆文档频率 (TF-IDF) 和基于嵌入的检索方法。
*   **检索优化：** 讨论如何优化检索过程，包括分块策略、查询重写和重排序等技术。

**2.2 智能代理 (Agents)**
*   介绍智能代理的基本概念，包括[环境](#环境-environment)、[动作](#动作-actions)和[规划](#规划-planning)。
*   讨论智能代理如何进行规划、反思和纠错。

#### 3. 核心观点与主题 (通俗易懂版)

*   本章介绍两种让 AI 模型更强大的方法：
    1.  **RAG (检索增强生成)：** 给 AI 模型配一个“外脑”，让它在回答问题或生成内容前先“查资料”，确保其生成的内容更准确可靠，减少胡说八道。
    2.  **智能代理 (Agents)：** 赋予 AI 模型行动能力，让它能主动完成复杂任务，例如自动编代码、订机票等.不再是被动地回答问题.
*   **核心：** 如何将 AI 模型真正应用于实际场景, 并解决实际问题。本章是连接 AI 模型**能力与应用**需求的**桥梁**。

#### 4. 每一部分的重点内容 (通俗易懂版)

**4.1 RAG (检索增强生成)**
*   **RAG 架构：** 三步走流程：
    1.  根据问题“**搜索**”相关资料。
    2.  将搜索到的资料“**喂**”给 AI 模型。
    3.  AI 模型结合资料“**生成**”答案。
*   **检索算法：** 如何“搜索”资料？
    *   **TF-IDF：** 根据关键词的重要性搜索。
    *   **基于嵌入的检索：** 根据语义相似性搜索。
*   **检索优化：** 如何让“搜索”更高效准确？
    *   **分块策略：** 将文章分段。
    *   **查询重写：** 修改搜索关键词。

**4.2 智能代理 (Agents)**
*   **基本概念：** 智能代理像一个“智能体”，在“环境”中执行“动作”。例如，自动驾驶 AI 是智能代理，道路是环境，动作包括加速、减速、转弯等。
*   **规划、反思和纠错：** 智能代理不仅执行命令，还会提前计划，执行中反思，发现错误会纠正。

#### 5. 实例或应用

**5.1 RAG 应用**
*   **问答系统：** 用户提问后，系统检索相关文档，然后生成答案。
    *   *示例：* 用户问“什么是RAG？”，系统检索关于 RAG 定义和应用的文章，然后生成简洁答案。
*   **代码生成：** 根据用户需求，检索相关代码片段，然后生成完整代码。
    *   *示例：* 用户要求“生成 Python 函数计算斐波那契数列”，系统检索相关代码示例，生成完整函数代码。

**5.2 智能代理应用**
*   **SWE-agent：** 用于软件开发的智能代理，能自动完成代码编写、测试和修复等。
    *   *示例：* SWE-agent 自动修复代码中的错误，并生成单元测试。
*   **数据库查询：** 将自然语言查询转换为 SQL 查询，并执行。
    *   *示例：* 用户询问“有多少家没有收入的公司融资超过 10 亿美元？”，系统转换为 SQL 查询并在数据库中执行。

#### 6. 关键概念与知识点
*   **检索 (Retrieval)：** 从大量资料中找到所需部分。
*   **分块 (Chunking)：** 为方便检索和处理，将大文档分割成小块。
*   **索引 (Indexing)：** 像给书建立目录一样，加快检索速度。
*   **环境 (Environment)：** 智能代理所处的外部世界 (如自动驾驶汽车的道路)。
*   **动作 (Actions)：** 智能代理可执行的操作 (如自动驾驶汽车的加速、减速)。
*   **规划 (Planning)：** 智能代理提前制定的行动方案 (如下棋前先想好几步)。
*   **词频 (Term Frequency, TF)：** 某个词在文档中出现的频率。 *例如：* 在一篇关于“AI”的文章中，“AI”出现的次数越多，TF 就越高。
*   **逆文档频率 (Inverse Document Frequency, IDF)：** 包含某个词的文档越少，这个词就越重要。*例如：*“的”、“了”等常用词 IDF 低；“量子计算”这类词只在少数专业文章出现，IDF 高。

#### 7. 专有名词解析

| 原文                               | 翻译         | 说明                                    |
| :------------------------------- | :--------- | :------------------------------------ |
| RAG                              | 检索增强生成     | 一种通过检索外部知识增强生成模型性能的方法，可减少模型幻觉。        |
| Agents                           | 智能代理       | 可与环境互动并执行复杂任务的 AI 系统。                 |
| TF-IDF                           | 词频-逆文档频率   | 信息检索和文本挖掘常用加权技术，评估词对文档集或语料库中某文档的重要程度。 |
| Term Frequency (TF)              | 词频         | 给定词语在该文件中出现的次数。                       |
| Inverse Document Frequency (IDF) | 逆文档频率      | 如果包含某词条的文档越少，则该词条区分能力越好。              |
| Okapi BM25                       | Okapi BM25 | 一种基于 TF-IDF 改进的排序函数，通过文档长度标准化词频得分。    |
| Text-to-SQL                      | 文本到 SQL    | 据用户查询和提供的表模式，确定所需的 SQL 查询。            |
| Semantic Parsing                 | 语义解析       | 将自然语言文本转换为机器可理解的语义表示。                 |
| SWE-agent                        | SWE-agent  | 基于 GPT-4 构建的智能代理，环境是计算机，动作包括导航、搜索和编辑。 |

#### 8. 总结与关联

第六章介绍了 RAG 和智能代理两种重要的 AI 应用模式，分别适用于不同场景。
*   **与之前章节关联：** 本章建立在基础模型概念之上，介绍如何利用模型构建实际应用。
*   **对后续章节影响：** 为构建更复杂的 AI 系统奠定基础，例如可结合 RAG 和智能代理构建更强大的 AI 应用。

